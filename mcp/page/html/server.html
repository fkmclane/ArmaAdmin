<!DOCTYPE html>
<html>
	<head>
		<title>Server - MCP</title>

		<meta http-equiv="Content-Type" content="text/html; charset=latin1"/>

		<link href="/res/common.css" rel="stylesheet" type="text/css"/>
		<link href="/res/nav.css" rel="stylesheet" type="text/css"/>
		<link href="/res/server/stylesheet.css" rel="stylesheet" type="text/css"/>

		<script src="/res/common.js" type="text/javascript"></script>
		<script src="/res/server/functions.js" type="text/javascript"></script>
		<script src="/res/server/script.js" type="text/javascript"></script>

		<!-- CodeMirror stuff -->
	</head>
	<body>
		<header>
			<img src="/res/aalogo.png" alt=""/>
			<span>Server</span>
		</header>

		<nav>
			<span class="left" style="display: none">
				<ul>
					<li><button onclick="change('console')">Console</button></li>
					<li><button onclick="change('settings')">Settings</button></li>
					<li><button onclick="change('script')">Script</button></li>
				</ul>
			</span>
			<span class="right">
				<span id="working" style="display: none"></span>
				<ul>
					<li><select id="server_select" onchange="change_server(this.value)"></select></li>
					<li><button onclick="goto('/user')">User</button></li>
					<li><button id="admin_button" onclick="goto('/admin')" style="display: none">Admin</button></li>
					<li><button onclick="unsetCookie(); goto('/')">Logout</button></li>
				</ul>
			</span>
		</nav>

		<main>
			<section id="loading">
				<p>Loading...</p>
			</section>

			<section id="console" style="display: none">
				<nav class="action">
					<span class="left">
						<section id="stopped">
							<ul>
								<li><button id="start_button" onclick="start()">Start</button></li>
							</ul>
						</section>
						<section id="started">
							<ul>
								<li><button id="stop_button" onclick="stop()">Stop</button></li>
								<li><button id="restart_button" onclick="restart()">Restart</button></li>
								<li><button id="reload_button" onclick="reload()">Reload</button></li>
							</ul>
						</section>
					</span>
					<span class="right">
						<span class="status">Status: <span id="status">Contacting server...</span></span>
					</span>
				</nav>

				<form id="command" onsubmit="submitCommand(this.elements['command_input'].value); return false">
					<table>
						<tr>
							<td>
								<input id="command_input" type="text" disabled/>
							</td>
							<td>
								<button id="command_submit" type="submit" disabled>Send</button>
							</td>
						</tr>
					</table>
				</form>

				<pre id="log"></pre>
			</section>

			<section id="settings" style="display: none">
				<nav class="action">
					<span class="right">
						<ul>
							<li><button id="settings_save_button" onclick="saveSettings()">Start</button></li>
						</ul>
					</span>
				</nav>

				<div id="settings_codemirror"></div>
			</section>

			<section id="script" style="display: none">
				<nav class="action">
					<span class="right">
						<ul>
							<li><button id="script_save_button" onclick="saveScript()">Save</button></li>
							<li><button id="script_editor_button" onclick="change('script', 'script_editor')">Editor</button></li>
							<li><button id="script_log_button" onclick="change('script', 'script_console')">Console</button></li>
						</ul>
					</span>
				</nav>

				<section id="script_editor">
					<div id="script_codemirror"></div>
				</section>

				<section id="script_console" style="display: none">
					<pre id="script_log"></pre>
				</section>
			</section>
		</main>
	</body>
</html>
