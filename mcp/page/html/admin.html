<!DOCTYPE html>
<html>
	<head>
		<title>Administration - MCP</title>

		<meta http-equiv="Content-Type" content="text/html; charset=latin1"/>

		<link href="/res/common.css" rel="stylesheet" type="text/css"/>
		<link href="/res/nav.css" rel="stylesheet" type="text/css"/>
		<link href="/res/admin/stylesheet.css" rel="stylesheet" type="text/css"/>

		<script src="/res/common.js" type="text/javascript"></script>
		<script src="/res/admin/functions.js" type="text/javascript"></script>
		<script src="/res/admin/script.js" type="text/javascript"></script>

		<!-- CodeMirror stuff -->
	</head>

	<body>
		<header>
			<img src="/res/aalogo.png" alt=""/>
			<span>Administration</span>
		</header>

		<nav>
			<span class="left">
				<ul>
					<li><button onclick="change('users')">Users</button></li>
					<li><button onclick="change('servers')">Servers</button></li>
					<li><button onclick="change('sources')">Sources</button></li>
					<li><button onclick="change('config')">Config</button></li>
				</ul>
			</span>

			<span class="right">
				<span id="working" style="display: none"></span>
				<ul>
					<li><button onclick="goto('/server')">Server</button></li>
					<li><button onclick="logout(goto.bind(null, '/'))">Logout</button></li>
				</ul>
			</span>
		</nav>

		<main>
			<section id="loading">
				<p>Loading...</p>
			</section>

			<section id="users" style="display: none">
				<section id="user_list">
					<nav class="action">
						<span class="left">
							<ul>
								<li><button id="user_create_button" onclick="change('users', 'user_create')">Create</button></li>
								<li><button id="user_modify_button" onclick="change('users', 'user_modify')" disabled>Modify</button></li>
								<li><button id="user_destroy_button" onclick="userDestroy()" disabled>Destroy</button></li>
							</ul>
						</span>
					</nav>

					<select id="user_listing" onchange="userSelect()" multiple></select>
				</section>

				<section id="user_create" style="display: none">
					<form id="user_create_form">
						<table>
							<tr>
								<td><label for="user_create_username">Username: </label></td>
								<td><input id="user_create_username" type="text"/></td>
							</tr>
							<tr>
								<td><label for="user_create_password">Password: </label></td>
								<td><input id="user_create_password" type="password"/></td>
							</tr>
							<tr>
								<td><label for="user_create_key">API Key: </label></td>
								<td><input id="user_create_key" type="password"/><button onclick="this.previousSibling.value = generateKey()">Generate</button></td>
							</tr>
							<tr>
								<td><label for="user_create_admin">Admin: </label></td>
								<td><input id="user_create_admin" type="checkbox"/></td>
							</tr>
							<tr>
								<td><label for="user_create_active">Active: </label></td>
								<td><input id="user_create_active" type="checkbox" checked/></td>
							</tr>
							<tr>
								<td><label for="user_create_servers">Servers: </label></td>
								<td><select id="user_create_servers" class="mini" multiple></select></td>
							</tr>
							<tr></tr>
							<tr>
								<td><button onclick="change('users', 'user_list')">Cancel</button></td>
								<td><button onclick="userCreate(); change('users', 'user_list')">Create</button></td>
							</tr>
						</table>
					</form>
				</section>

				<section id="user_modify" style="display: none">
					<form>
						<table>
							<tr>
								<td><label for="user_modify_username">Username: </label></td>
								<td><input id="user_modify_username" type="text" disabled/></td>
							</tr>
							<tr>
								<td><label for="user_modify_password">Password: </label></td>
								<td><input id="user_modify_password" type="password"/></td>
							</tr>
							<tr>
								<td><label for="user_modify_key">API Key: </label></td>
								<td><input id="user_modify_key" type="password"/><button onclick="this.previousSibling.value = generateKey()">Generate</button></td>
							</tr>
							<tr>
								<td><label for="user_modify_admin">Admin: </label></td>
								<td><input id="user_modify_admin" type="checkbox"/></td>
							</tr>
							<tr>
								<td><label for="user_modify_active">Active: </label></td>
								<td><input id="user_modify_active" type="checkbox"/></td>
							</tr>
							<tr>
								<td><label for="user_modify_servers">Servers: </label></td>
								<td><select id="user_modify_servers" class="mini" multiple></select></td>
							</tr>
							<tr></tr>
							<tr>
								<td><button onclick="change('users', 'user_list')">Cancel</button></td>
								<td><button onclick="user_modify(); change('users', 'user_list')">Modify</button></td>
							</tr>
						</table>
					</form>
				</section>
			</section>

			<section id="servers" style="display: none">
				<section id="server_list">
					<nav class="action">
						<span class="left">
							<ul>
								<li><button id="server_create_button" onclick="change('servers', 'server_create')" disabled>Create</button></li>
								<li><button id="server_upgrade_button" onclick="serverUpgrade()" disabled>Upgrade</button></li>
								<li><button id="server_destroy_button" onclick="serverDestroy()" disabled>Destroy</button></li>
							</ul>
						</span>

						<span class="right">
							<ul>
								<li><button id=server_upgrade_all_button" onclick="serverUpgradeAll()" disabled>Upgrade All</button></li>
							</ul>
						</span>
					</nav>

					<select id="server_listing" onchange="serverSelect()" multiple></select>
				</section>

				<section id="server_create" style="display: none">
					<form>
						<table>
							<tr>
								<td><label for="server_name">Name: </label></td>
								<td><input id="server_name" type="text"/></td>
							</tr>
							<tr>
								<td><label for="server_source">Source: </label></td>
								<td><select id="server_source"></select></td>
							</tr>
							<tr></tr>
							<tr>
								<td><button onclick="change('servers', 'server_list')">Cancel</button></td>
								<td><button onclick="server_submit(); change('servers', 'server_list')">Create</button></td>
							</tr>
						</table>
					</form>
				</section>
			</section>

			<section id="sources" style="display: none">
				<section id="source_list">
					<nav class="action">
						<span class="left">
							<ul>
								<li><button id="source_create_button" onclick="change('sources', 'source_add')" disabled>Add</button></li>
								<li><button id="source_update_button" onclick="sourceUpdate()" disabled>Update</button></li>
								<li><button id="source_remove_button" onclick="sourceRemove()" disabled>Remove</button></li>
							</ul>
						</span>

						<span class="right">
							<ul>
								<li><button onclick="source_update_all()" disabled>Update All</button></li>
							</ul>
						</span>
					</nav>

					<select id="source_listing" onchange="sourceSelect()" multiple></select>
				</section>

				<section id="source_add" style="display: none">
					<form>
						<table>
							<tr>
								<td><label for="source_name">Name: </label></td>
								<td><input id="source_name" type="text"/></td>
							</tr>
							<tr>
								<td><label for="source_bzr">Bzr Address: </label></td>
								<td><input id="source_bzr" type="text"/></td>
							</tr>
							<tr></tr>
							<tr>
								<td><button onclick="change('sources', 'source_list')">Cancel</button></td>
								<td><button onclick="source_submit(); change('sources', 'source_list')">Add</button></td>
							</tr>
						</table>
					</form>
				</section>
			</section>

			<section id="config" style="display: none">
				<nav class="action">
					<span class="right">
						<ul>
							<li><button id="config_submit" onclick="configSave()">Save</button></li>
						</ul>
					</span>
				</nav>

				<div id="config_editor"></div>
			</section>
		</main>
	</body>
</html>
